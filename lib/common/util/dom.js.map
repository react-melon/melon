{"version":3,"sources":["/src/common/util/dom.js"],"names":["getClientHeight","getClientWidth","getPosition","hasClass","addClass","removeClass","getCompatElement","el","doc","ownerDocument","document","compatMode","documentElement","body","clientHeight","clientWidth","element","bound","getBoundingClientRect","root","clientTop","clientLeft","scrollTop","window","pageYOffset","scrollLeft","pageXOffset","left","parseFloat","top","width","height","cls","className","match","RegExp","reg","replace"],"mappings":";;;;;;;;;;;;;;;;YAoBgBA,e,GAAAA,e;YAIAC,c,GAAAA,c;YAIAC,W,GAAAA,W;YAqBAC,Q,GAAAA,Q;YAIAC,Q,GAAAA,Q;YAMAC,W,GAAAA,W;AA3DhB;;;;;AAKA;;;;;;;AAOA,aAASC,gBAAT,CAA0BC,EAA1B,EAA8B;AAC1B,YAAIC,MAAMD,MAAMA,GAAGE,aAAT,IAA0BC,QAApC;AACA,YAAIC,aAAaH,IAAIG,UAArB;AACA,eAAO,CAACA,UAAD,IAAeA,eAAe,YAA9B,GACDH,IAAII,eADH,GAEDJ,IAAIK,IAFV;AAGH;;AAEM,aAASb,eAAT,GAA2B;AAC9B,eAAOM,mBAAmBQ,YAA1B;AACH;;AAEM,aAASb,cAAT,GAA0B;AAC7B,eAAOK,mBAAmBS,WAA1B;AACH;;AAEM,aAASb,WAAT,CAAqBc,OAArB,EAA8B;;AAEjC,YAAIC,QAAQD,QAAQE,qBAAR,EAAZ;;AAEA,YAAIC,OAAOT,SAASE,eAApB;AACA,YAAIC,OAAOH,SAASG,IAApB;;AAEA,YAAIO,YAAYD,KAAKC,SAAL,IAAkBP,KAAKO,SAAvB,IAAoC,CAApD;AACA,YAAIC,aAAaF,KAAKE,UAAL,IAAmBR,KAAKQ,UAAxB,IAAsC,CAAvD;AACA,YAAIC,YAAYC,OAAOC,WAAP,IAAsBL,KAAKG,SAA3C;AACA,YAAIG,aAAaF,OAAOG,WAAP,IAAsBP,KAAKM,UAA5C;;AAEA,eAAO;AACHE,kBAAMC,WAAWX,MAAMU,IAAjB,IAAyBF,UAAzB,GAAsCJ,UADzC;AAEHQ,iBAAKD,WAAWX,MAAMY,GAAjB,IAAwBP,SAAxB,GAAoCF,SAFtC;AAGHU,mBAAOb,MAAMa,KAHV;AAIHC,oBAAQd,MAAMc;AAJX,SAAP;AAOH;;AAEM,aAAS5B,QAAT,CAAkBa,OAAlB,EAA2BgB,GAA3B,EAAgC;AACnC,eAAOhB,QAAQiB,SAAR,CAAkBC,KAAlB,CAAwB,IAAIC,MAAJ,CAAW,YAAYH,GAAZ,GAAkB,SAA7B,CAAxB,CAAP;AACH;;AAEM,aAAS5B,QAAT,CAAkBY,OAAlB,EAA2BgB,GAA3B,EAAgC;AACnC,YAAI,CAAC,KAAK7B,QAAL,CAAca,OAAd,EAAuBgB,GAAvB,CAAL,EAAkC;AAC9BhB,oBAAQiB,SAAR,IAAqB,MAAMD,GAA3B;AACH;AACJ;;AAEM,aAAS3B,WAAT,CAAqBW,OAArB,EAA8BgB,GAA9B,EAAmC;AACtC,YAAI,KAAK7B,QAAL,CAAca,OAAd,EAAuBgB,GAAvB,CAAJ,EAAiC;AAC7B,gBAAII,MAAM,IAAID,MAAJ,CAAW,YAAYH,GAAZ,GAAkB,SAA7B,CAAV;AACAhB,oBAAQiB,SAAR,GAAoBjB,QAAQiB,SAAR,CAAkBI,OAAlB,CAA0BD,GAA1B,EAA+B,GAA/B,CAApB;AACH;AACJ","file":"dom.js","sourcesContent":["/**\n * @file melon dom 相关的小工具\n * @author leon(ludafa@outlook.com)\n */\n\n/**\n * 获取文档的兼容根节点\n *\n * @inner\n * @param {?HTMLElement=} el 节点引用，跨 frame 时需要\n * @return {HTMLElement} 兼容的有效根节点\n */\nfunction getCompatElement(el) {\n    let doc = el && el.ownerDocument || document;\n    let compatMode = doc.compatMode;\n    return !compatMode || compatMode === 'CSS1Compat'\n        ? doc.documentElement\n        : doc.body;\n}\n\nexport function getClientHeight() {\n    return getCompatElement().clientHeight;\n}\n\nexport function getClientWidth() {\n    return getCompatElement().clientWidth;\n}\n\nexport function getPosition(element) {\n\n    let bound = element.getBoundingClientRect();\n\n    let root = document.documentElement;\n    let body = document.body;\n\n    let clientTop = root.clientTop || body.clientTop || 0;\n    let clientLeft = root.clientLeft || body.clientLeft || 0;\n    let scrollTop = window.pageYOffset || root.scrollTop;\n    let scrollLeft = window.pageXOffset || root.scrollLeft;\n\n    return {\n        left: parseFloat(bound.left) + scrollLeft - clientLeft,\n        top: parseFloat(bound.top) + scrollTop - clientTop,\n        width: bound.width,\n        height: bound.height\n    };\n\n}\n\nexport function hasClass(element, cls) {\n    return element.className.match(new RegExp('(\\\\s|^)' + cls + '(\\\\s|$)'));\n}\n\nexport function addClass(element, cls) {\n    if (!this.hasClass(element, cls)) {\n        element.className += ' ' + cls;\n    }\n}\n\nexport function removeClass(element, cls) {\n    if (this.hasClass(element, cls)) {\n        let reg = new RegExp('(\\\\s|^)' + cls + '(\\\\s|$)');\n        element.className = element.className.replace(reg, ' ');\n    }\n}\n"]}